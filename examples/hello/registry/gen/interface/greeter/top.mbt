// Generated by `wit-bindgen` 0.51.0. DO NOT EDIT!
///|
pub fn meta() -> @types.CommandMeta {

      let return_area = mbt_ffi_malloc(44)
      wasmImportMeta(return_area);

      let result = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 0), mbt_ffi_load32((return_area) + 4))

      let result0 = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 8), mbt_ffi_load32((return_area) + 12))

      let result1 = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 16), mbt_ffi_load32((return_area) + 20))

      let array : Array[String] = [];
      for index = 0; index < (mbt_ffi_load32((return_area) + 28)); index = index + 1 {
            let iter_base = (mbt_ffi_load32((return_area) + 24)) + (index * 8)

            let result2 = mbt_ffi_ptr2str(mbt_ffi_load32((iter_base) + 0), mbt_ffi_load32((iter_base) + 4))

            array.push(result2)
      }
      mbt_ffi_free(mbt_ffi_load32((return_area) + 24))

      let result3 = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 32), mbt_ffi_load32((return_area) + 36))
      mbt_ffi_free(return_area)
      return @types.CommandMeta::{name : result, summary : result0, usage : result1, aliases : array, version : result3, hidden : (mbt_ffi_load8_u((return_area) + 40) != 0)}

}
///|
pub fn run(argv : Array[String]) -> Result[UInt, @types.CommandError] {

      let cleanup_list : Array[Int] = []

      let address = mbt_ffi_malloc((argv).length() * 8);
      for index = 0; index < (argv).length(); index = index + 1 {
            let iter_elem : String = (argv)[(index)]
            let iter_base = address + (index * 8);

            let ptr = mbt_ffi_str2ptr(iter_elem)
            mbt_ffi_store32((iter_base) + 4, iter_elem.length())
            mbt_ffi_store32((iter_base) + 0, ptr)
            mbt_ffi_free(ptr)

      }
      let return_area = mbt_ffi_malloc(16)
      wasmImportRun(address, (argv).length(), return_area);

      let lifted2 = match (mbt_ffi_load8_u((return_area) + 0)) {
            0 => {

                  Result::Ok((mbt_ffi_load32((return_area) + 4)).reinterpret_as_uint())
            }
            1 => {

                  let lifted = match (mbt_ffi_load8_u((return_area) + 4)) {
                        0 => {

                              let result = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 8), mbt_ffi_load32((return_area) + 12))

                              @types.CommandError::UnknownCommand(result)
                        }
                        1 => {

                              let result0 = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 8), mbt_ffi_load32((return_area) + 12))

                              @types.CommandError::InvalidArgs(result0)
                        }
                        2 => {

                              let result1 = mbt_ffi_ptr2str(mbt_ffi_load32((return_area) + 8), mbt_ffi_load32((return_area) + 12))

                              @types.CommandError::Failed(result1)
                        }
                        _ => panic()
                  }

                  Result::Err(lifted)
            }
            _ => panic()
      }
      mbt_ffi_free(address)
      mbt_ffi_free(return_area)

      cleanup_list.each(mbt_ffi_free)
      return lifted2

}

