package wacli:cli@2.0.0;

interface types {
  type exit-code = u32;

  record arg-def {
    name: string,
    short: option<string>,
    long: option<string>,
    help: string,
    required: bool,
    default-value: option<string>,
    value-name: option<string>,
    takes-value: bool,
  }

  record command-meta {
    name: string,
    summary: string,
    usage: string,
    aliases: list<string>,
    version: string,
    hidden: bool,
    description: string,
    examples: list<string>,
    args: list<arg-def>,
  }

  variant command-error {
    unknown-command(string),
    invalid-args(string),
    failed(string),
    io(string),
  }

  type command-result = result<exit-code, command-error>;

  record pipe-meta {
    name: string,
    summary: string,
    input-types: list<string>,
    output-type: string,
    version: string,
  }

  variant pipe-error {
    parse-error(string),
    transform-error(string),
    invalid-option(string),
  }

  record pipe-info {
    name: string,
    summary: string,
    path: string,
  }
}
