// Generated by `wit-bindgen` 0.51.0. DO NOT EDIT!

pub fn wasmExportArgs() -> Int {

      let (result) : (Array[String]) = @host.args();

      let address = mbt_ffi_malloc((result).length() * 8);
      for index = 0; index < (result).length(); index = index + 1 {
            let iter_elem : String = (result)[(index)]
            let iter_base = address + (index * 8);

            let ptr = mbt_ffi_str2ptr(iter_elem)
            mbt_ffi_store32((iter_base) + 4, iter_elem.length())
            mbt_ffi_store32((iter_base) + 0, ptr)

      }
      mbt_ffi_store32((return_area) + 4, (result).length())
      mbt_ffi_store32((return_area) + 0, address)
      return return_area

}

pub fn wasmExportArgsPostReturn(p0 : Int) -> Unit {

      for index = 0; index < (mbt_ffi_load32((p0) + 4)); index = index + 1 {
            let iter_base = (mbt_ffi_load32((p0) + 0)) + (index * 8)
            mbt_ffi_free(mbt_ffi_load32((iter_base) + 0))

      }
      mbt_ffi_free(mbt_ffi_load32((p0) + 0))

}

pub fn wasmExportEnv() -> Int {

      let (result) : (Array[(String, String)]) = @host.env();

      let address = mbt_ffi_malloc((result).length() * 16);
      for index = 0; index < (result).length(); index = index + 1 {
            let iter_elem : (String, String) = (result)[(index)]
            let iter_base = address + (index * 16);

            let ptr = mbt_ffi_str2ptr((iter_elem).0)
            mbt_ffi_store32((iter_base) + 4, (iter_elem).0.length())
            mbt_ffi_store32((iter_base) + 0, ptr)

            let ptr0 = mbt_ffi_str2ptr((iter_elem).1)
            mbt_ffi_store32((iter_base) + 12, (iter_elem).1.length())
            mbt_ffi_store32((iter_base) + 8, ptr0)

      }
      mbt_ffi_store32((return_area) + 4, (result).length())
      mbt_ffi_store32((return_area) + 0, address)
      return return_area

}

pub fn wasmExportEnvPostReturn(p0 : Int) -> Unit {

      for index = 0; index < (mbt_ffi_load32((p0) + 4)); index = index + 1 {
            let iter_base = (mbt_ffi_load32((p0) + 0)) + (index * 16)
            mbt_ffi_free(mbt_ffi_load32((iter_base) + 0))
            mbt_ffi_free(mbt_ffi_load32((iter_base) + 8))

      }
      mbt_ffi_free(mbt_ffi_load32((p0) + 0))

}

pub fn wasmExportStdoutWrite(p0 : Int, p1 : Int) -> Unit {

      let result = mbt_ffi_ptr2bytes(p0, p1)

      let _ = @host.stdout_write(result);

}

pub fn wasmExportStderrWrite(p0 : Int, p1 : Int) -> Unit {

      let result = mbt_ffi_ptr2bytes(p0, p1)

      let _ = @host.stderr_write(result);

}

pub fn wasmExportStdoutFlush() -> Unit {

      let _ = @host.stdout_flush();

}

pub fn wasmExportStderrFlush() -> Unit {

      let _ = @host.stderr_flush();

}

pub fn wasmExportStdinRead(p0 : Int) -> Int {

      let (result) : (FixedArray[Byte]) = @host.stdin_read((p0).reinterpret_as_uint());

      let ptr = mbt_ffi_bytes2ptr(result)

      mbt_ffi_store32((return_area) + 4, result.length())
      mbt_ffi_store32((return_area) + 0, ptr)
      return return_area

}

pub fn wasmExportStdinReadPostReturn(p0 : Int) -> Unit {
      mbt_ffi_free(mbt_ffi_load32((p0) + 0))

}

pub fn wasmExportIsTtyStdout() -> Int {

      let (result) : (Bool) = @host.is_tty_stdout();
      return (if result { 1 } else { 0 })

}

pub fn wasmExportIsTtyStderr() -> Int {

      let (result) : (Bool) = @host.is_tty_stderr();
      return (if result { 1 } else { 0 })

}

pub fn wasmExportTerminalSize() -> Int {

      let (result) : ((UInt, UInt)?) = @host.terminal_size();

      match (result) {
            None => {
                  mbt_ffi_store8((return_area) + 0, (0))

                  ()
            }
            Some(payload0) => {
                  mbt_ffi_store8((return_area) + 0, (1))
                  mbt_ffi_store32((return_area) + 4, ((payload0).0).reinterpret_as_int())
                  mbt_ffi_store32((return_area) + 8, ((payload0).1).reinterpret_as_int())

                  ()
            }
      }
      return return_area

}

pub fn wasmExportRandomBytes(p0 : Int) -> Int {

      let (result) : (FixedArray[Byte]) = @host.random_bytes((p0).reinterpret_as_uint());

      let ptr = mbt_ffi_bytes2ptr(result)

      mbt_ffi_store32((return_area) + 4, result.length())
      mbt_ffi_store32((return_area) + 0, ptr)
      return return_area

}

pub fn wasmExportRandomBytesPostReturn(p0 : Int) -> Unit {
      mbt_ffi_free(mbt_ffi_load32((p0) + 0))

}

pub fn wasmExportInsecureRandomBytes(p0 : Int) -> Int {

      let (result) : (FixedArray[Byte]) = @host.insecure_random_bytes((p0).reinterpret_as_uint());

      let ptr = mbt_ffi_bytes2ptr(result)

      mbt_ffi_store32((return_area) + 4, result.length())
      mbt_ffi_store32((return_area) + 0, ptr)
      return return_area

}

pub fn wasmExportInsecureRandomBytesPostReturn(p0 : Int) -> Unit {
      mbt_ffi_free(mbt_ffi_load32((p0) + 0))

}

pub fn wasmExportExit(p0 : Int) -> Unit {

      let _ = @host.exit((p0).reinterpret_as_uint());

}

